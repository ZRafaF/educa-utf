{"config":{"lang":["pt"],"separator":"[\\s\\-,:!=\\[\\]()\"`/]+|\\.(?!\\d)|&[lg]t;|(?!\\b)(?=[A-Z][a-z])","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"In\u00edcio","text":""},{"location":"#a-filosofia","title":"A filosofia","text":"<p>O Educa UTF tem como sua filosofia facilitar a cria\u00e7\u00e3o e acessibilidade de materiais pedag\u00f3gicos. </p> <p>Os usu\u00e1rios podem criar materiais em formato de Blog interativo utilizando um superconjunto da linguagem de marca\u00e7\u00e3o Markdown. Esse superconjunto permite que o editor adicione componentes pr\u00e9-fabricados \u00e0 suas p\u00e1ginas, o que permite o aumento da interatividade com o usu\u00e1rio.</p>"},{"location":"criar-conteudo/","title":"Criar Conte\u00fado","text":""},{"location":"criar-conteudo/#criar-conteudo","title":"Criar conte\u00fado","text":"<p>Essa se\u00e7\u00e3o \u00e9 destinada a usu\u00e1rios com a inten\u00e7\u00e3o de criar novas p\u00e1ginas</p>"},{"location":"desenvolvimento/","title":"Desenvolvimento","text":""},{"location":"desenvolvimento/#desenvolvimento","title":"Desenvolvimento","text":"<p>Esta cole\u00e7\u00e3o \u00e9 focada principalmente para os interessados em modificar a aplica\u00e7\u00e3o.</p> <p>Ser\u00e3o apresentandas</p> <p>Para informa\u00e7\u00f5es sobre o setup do ambiente de desenvolvimento visite setup.</p>"},{"location":"desenvolvimento/#arquitetura","title":"Arquitetura","text":"<p>A aplica\u00e7\u00e3o principal foi escrita majoritariamente na linguagem de programa\u00e7\u00e3o <code>.tsx</code> um superconjunto de TypeScript.</p> <p>Os conte\u00fados s\u00e3o escritos em uma especie de Markdown customizado, utilizando aspectos da linguagem <code>.mdx</code>.</p> <p>O front-end do Educa UTF foi desenvolvido a partir da biblioteca ReactJS. Para mais informa\u00e7\u00f5es acesse a p\u00e1gina front-end</p>"},{"location":"desenvolvimento/#github","title":"Github","text":"<p>O reposit\u00f3rio educa-utf no Github \u00e9 o respons\u00e1vel em criar novas Releases automaticamente da imagem docker.</p>"},{"location":"desenvolvimento/#continuous-integration-docker-hub","title":"Continuous Integration Docker-hub","text":"<p>A integra\u00e7\u00e3o continua com o Docker-hub \u00e9 realizada no momento que ocorre uma a\u00e7\u00e3o de <code>push</code> na branch <code>release</code>.</p> <p>Attention</p> <p>A <code>tag</code> da release \u00e9 o titulo do Pull Request. Por isso preste aten\u00e7\u00e3o no momento que fizer um PR de outra branch para a branch <code>release</code>. Por conven\u00e7\u00e3o o titulo deve obedecer \"vx.x.x\". Por exemplo \"v0.1.2\"</p>"},{"location":"desenvolvimento/SEO/","title":"SEO","text":""},{"location":"desenvolvimento/SEO/#seo","title":"SEO","text":"<p>SEO ou Search Engine Optimization \u00e9 um aspecto crucial para essa aplica\u00e7\u00e3o. Esta p\u00e1gina apresentar\u00e1 as ferramentas e t\u00e9cnicas utilizadas para melhorar o SEO do EducaUTF.</p>"},{"location":"desenvolvimento/SEO/#indexadores","title":"Indexadores","text":""},{"location":"desenvolvimento/SEO/#google-search-console","title":"Google Search Console","text":"<p>O Google Search Console \u00e9 uma ferramenta fornecida pela Google para analisar a indexa\u00e7\u00e3o de seu website na plataforma. </p> <p>Os dados fornecidos por essa ferramenta s\u00e3o cruciais para a melhoria da aplica\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/SEO/#verificando-propriedade-do-website","title":"Verificando propriedade do website","text":"<p>Para verificar a propriedade da p\u00e1gina foi adicionado o arquivo <code>google9365f4fd3245c688.html</code> a pasta <code>public</code> da aplica\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/SEO/#bing-webmaster","title":"Bing Webmaster","text":"<p>O Bing Webmaster \u00e9 a ferramenta de indexa\u00e7\u00e3o do Bing, ela permite a importa\u00e7\u00e3o de p\u00e1ginas direto do Google Search Console, facilitando a integra\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/SEO/#metadados","title":"Metadados","text":"<p>Metadados s\u00e3o informa\u00e7\u00f5es extremamente \u00fateis para os crawlers, para os artigos estes foram gerados dinamicamente, o exemplo a seguir mostra a gera\u00e7\u00e3o de metadados para os artigos:</p> Text Only<pre><code>export async function generateMetadata({\n    params,\n}: PageProps): Promise&lt;Metadata&gt; {\n    const articleId = params.slug[0];\n\n    try {\n        const article = await getArticleById(articleId);\n        const articleStats = await getArticleStatsById(articleId);\n        const ArticleCoverUrl = getArticleCoverURL(article);\n        let tag = article.expand?.tag?.name ?? '';\n        return {\n            title: article.title,\n            description: article.description,\n            applicationName: 'EducaUTF',\n            authors: [{ name: articleStats.author_name }],\n            openGraph: {\n                title: article.title,\n                description: article.description,\n                siteName: 'EducaUTF',\n                images: [{ url: ArticleCoverUrl }],\n                locale: 'pt_BR',\n                type: 'website',\n            },\n            keywords: ['EducaUTF', 'artigo', article.title, tag],\n        };\n    } catch (error) {\n        return {\n            title: 'Artigo privado',\n            description: 'Artigo privado',\n        };\n    }\n}\n</code></pre>"},{"location":"desenvolvimento/SEO/#sitemap","title":"Sitemap","text":"<p>Sitemaps fornecem aos indexadores todo o esquema de seu website, eles s\u00e3o uteis para facilitar que o crawler alcance p\u00e1ginas que n\u00e3o possuam muitos links a elas.</p> <p>O arquivo <code>sitemap.xml</code> tamb\u00e9m \u00e9 gerado dinamicamente, para incluir todo o conte\u00fado gerado por usu\u00e1rios, voc\u00ea pode encontrar o script respons\u00e1vel em gera-lo em <code>app/sitemap.ts</code>.</p>"},{"location":"desenvolvimento/SEO/#robotstxt","title":"robots.txt","text":"<p>Esse arquivo serve como instru\u00e7\u00f5es para os crawlers, esse tamb\u00e9m \u00e9 gerado dinamicamente e pode ser encontrado em <code>app/robots.ts</code>.</p>"},{"location":"desenvolvimento/backend/","title":"Backend","text":""},{"location":"desenvolvimento/backend/#backend","title":"Backend","text":"<p>Foi utilizado o Banco de dados / backend de c\u00f3digo aberto PocketBase.</p> <p>Um dos grandes problemas enfrentado para a cria\u00e7\u00e3o de conte\u00fado por parte dos usu\u00e1rios \u00e9 a possibilidade de injetar c\u00f3digo malicioso nos arquivos de Markdown, por tanto algumas medidas tiveram de ser tomadas que acabaram tornando a aplica\u00e7\u00e3o menos customiz\u00e1vel. </p>"},{"location":"desenvolvimento/backend/#setup","title":"Setup","text":"<p>Para desenvolvimento recomendo realizar em uma m\u00e1quina LINUX como seu sistema operacional. Algumas fun\u00e7\u00f5es do backend assumem que est\u00e3o rodando em um ambiente UNIX e pode apresentar funcionamento incorreto se executado em outro sistema operacional.</p> <p>Tip</p> <p>Caso seu ambiente de desenvolvimento seja o windows d\u00ea uma olhada em Windows Subsystem for Linux (WSL).</p>"},{"location":"desenvolvimento/backend/#variaveis-de-ambiente","title":"Vari\u00e1veis de ambiente","text":"<p>Para iniciar o backend \u00e9 necess\u00e1rio criar as seguintes Vari\u00e1veis de Ambiente: Bash<pre><code>UTF_AUTH_TOKEN=meutokendeautenticacao\n</code></pre></p>"},{"location":"desenvolvimento/backend/#docker-compose","title":"Docker compose","text":"<p>O docker-compose da aplica\u00e7\u00e3o carrega os segredos a partir de um arquivo <code>.env</code>. Portanto a vari\u00e1vel <code>UTF_AUTH_TOKEN</code> deve estar l\u00e1.</p> <p>Exemplo de <code>.env</code></p> Bash<pre><code>UTF_AUTH_TOKEN=meutokendeautenticacao\n</code></pre>"},{"location":"desenvolvimento/backend/#executando-o-aplicativo","title":"Executando o aplicativo","text":"<p>Voc\u00ea pode executar a seguinte linha na root do projeto:</p> Bash<pre><code>UTF_AUTH_TOKEN=meutokendeautenticacao ./pocketbase serve\n</code></pre> <p>Ou carregar a chave de autentica\u00e7\u00e3o apartir de um arquivo <code>secrets.txt</code> com</p> Bash<pre><code>source secrets.txt &amp;&amp; ./pocketbase serve\n</code></pre>"},{"location":"desenvolvimento/backend/#como-a-autenticacao-e-feita","title":"Como a autentica\u00e7\u00e3o \u00e9 feita?","text":"<p>A autentica\u00e7\u00e3o de usu\u00e1rios da UTFPR \u00e9 feito atrav\u00e9s de um HTTP POST request para o endpoint <code>api/educautf/utfpr-auth</code>.</p> <p>O corpo do request deve seguir o formato: JSON<pre><code>{\n\"username\": \"my-username\",\n\"password\": \"my-password\",\n}\n</code></pre></p>"},{"location":"desenvolvimento/backend/#riscos","title":"Riscos","text":"<p>A autentica\u00e7\u00e3o no sistema da UTFPR \u00e9 feito diretamente no Backend sem acesso ao usu\u00e1rio atrav\u00e9s de um hook, para saber mais visite https://github.com/zRafaF/educa-utf-db/tree/main/pb_hooks. A \u00fanica vulnerabilidade para ataque direto seria atrav\u00e9s do spoofing de senhas.</p>"},{"location":"desenvolvimento/backend/#como-a-compressao-de-imagens-e-feita","title":"Como a compress\u00e3o de imagens \u00e9 feita?","text":""},{"location":"desenvolvimento/docker/","title":"Docker","text":""},{"location":"desenvolvimento/docker/#docker","title":"Docker","text":""},{"location":"desenvolvimento/docker/#criando-um-container-da-aplicacao-nextjs","title":"Criando um container da aplica\u00e7\u00e3o NEXT.js","text":""},{"location":"desenvolvimento/docker/#dockerfile","title":"Dockerfile","text":"<p>Cheque a configura\u00e7\u00e3o do arquivo <code>Dockerfile</code>, a vers\u00e3o contida no reposit\u00f3rio foi gerada apartir do projeto nextjs-with-docker</p> <p>ATEN\u00c7\u00c3O As vari\u00e1veis de ambiente <code>ENV</code> definidas na <code>Dockerfile</code>, principalmente <code>PB_URL</code> essa vari\u00e1vel define a URL do backend</p>"},{"location":"desenvolvimento/docker/#criando-a-imagem","title":"Criando a imagem","text":"<p>A imagem oficial desse projeto pode ser encontrada em https://hub.docker.com/r/zrafaf/educa_utf_nextjs</p> <p>Rode <code>docker build -t educa_utf_nextjs .</code> na root do projeto.</p>"},{"location":"desenvolvimento/docker/#dando-push-em-uma-imagem-para-o-docker-hub","title":"Dando push em uma imagem para o docker hub","text":"<ol> <li>Fa\u00e7a login no docker usando <code>docker login</code></li> <li>Crie uma nova tag para sua imagem com <code>docker tag educa_utf_nextjs [username]/educa_utf_nextjs:[version]</code></li> <li>Fa\u00e7a o push com <code>docker push [username]/educa_utf_nextjs:[version]</code></li> </ol> <p>Fazendo <code>push</code> de uma imagem como <code>latest</code></p> <ol> <li><code>docker tag educa_utf_nextjs zrafaf/educa_utf_nextjs</code></li> <li><code>docker push zrafaf/educa_utf_nextjs</code></li> </ol> <p>A qualquer momento voc\u00ea pode encontrar suas imagens atrav\u00e9s de <code>docker images</code></p>"},{"location":"desenvolvimento/docker/#iniciando-os-containers","title":"Iniciando os Containers","text":""},{"location":"desenvolvimento/docker/#variaveis-de-ambiente","title":"Vari\u00e1veis de ambiente","text":"<p>O docker compose faz uso das seguintes vari\u00e1veis de ambiente:</p> <ul> <li><code>UMAMI_APP_SECRET</code></li> <li><code>UTF_AUTH_TOKEN</code></li> </ul> <p>Esses segredos devem ser setados dentro de um arquivo <code>.env</code> no mesmo diret\u00f3rio do <code>docker-compose.yaml</code>.</p> <p>Exemplo de <code>.env</code></p> Bash<pre><code>UMAMI_APP_SECRET=meusegredoumami\nUTF_AUTH_TOKEN=meutokendeautenticacao\n</code></pre>"},{"location":"desenvolvimento/docker/#docker-compose","title":"Docker compose","text":"<p>Para iniciar os containers voc\u00ea pode utilizar o seguinte docker-compose</p> YAML<pre><code>version: '3.8'\nservices:\nnext:\ndepends_on:\n- pocketbase\nimage: zrafaf/educa_utf_nextjs:latest\nrestart: unless-stopped\nports:\n- 3000:3000\npocketbase:\nimage: zrafaf/educa_utf_pocketbase:latest\nrestart: unless-stopped\nports:\n- 8090:8090\nvolumes:\n- ./pocketbase_data:/pb/pb_data\nenvironment:\nUTF_AUTH_TOKEN: '${UTF_AUTH_TOKEN}'\nwatchtower:\nimage: containrrr/watchtower\nrestart: unless-stopped\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\ncommand: --interval 30\nnginx_proxy:\nimage: jc21/nginx-proxy-manager:latest\nrestart: unless-stopped\nports:\n- '80:80'\n- '81:81'\n- '443:443'\nvolumes:\n- ./nginx_proxy/data:/data\n- ./nginx_proxy/letsencrypt:/etc/letsencrypt\ndozzle:\ncontainer_name: dozzle\nimage: amir20/dozzle:latest\nlabels:\n- 'com.centurylinklabs.watchtower.enable=false' # Disables watchtower auto update\nrestart: unless-stopped\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\nports:\n- 9999:8080\n# Runs on port 61208\nglances:\nimage: nicolargo/glances:latest-full\npid: host\nnetwork_mode: host\nrestart: unless-stopped\nvolumes:\n- /var/run/docker.sock:/var/run/docker.sock\n- /run/user/1000/podman/podman.sock:/run/user/1000/podman/podman.sock\nenvironment:\n- 'GLANCES_OPT=-w'\numami:\nimage: zrafaf/educa_utf_umami:latest\nports:\n- '3100:3000'\nenvironment:\nDATABASE_URL: postgresql://umami:umami@umami_db:5432/umami\nDATABASE_TYPE: postgresql\nAPP_SECRET: '${UMAMI_APP_SECRET}'\ndepends_on:\numami_db:\ncondition: service_healthy\nrestart: unless-stopped\numami_db:\nimage: postgres:15-alpine\nenvironment:\nPOSTGRES_DB: umami\nPOSTGRES_USER: umami\nPOSTGRES_PASSWORD: umami\nvolumes:\n- ./umami-db-data:/var/lib/postgresql/data\nrestart: unless-stopped\nhealthcheck:\ntest:\n[\n'CMD-SHELL',\n'pg_isready -U $${POSTGRES_USER} -d $${POSTGRES_DB}',\n]\ninterval: 5s\ntimeout: 5s\nretries: 5\n</code></pre> <p>Voc\u00ea pode iniciar os containers com <code>docker compose up</code>.</p> <p>Info</p> <p>Se algo der errado voc\u00ea pode tentar criar o volume manualmente com: Bash<pre><code>mkdir -p ~/pocketbase-data\nchown -R $USER:$USER ~/pocketbase-data\n</code></pre> Voc\u00ea tamb\u00e9m pode checar se o usu\u00e1rio tem permiss\u00e3o de leitura e escrita com  Bash<pre><code>chmod -R 755 ~/pocketbase-data\n</code></pre></p>"},{"location":"desenvolvimento/docker/#atualizando-a-imagem-educa_utf_nextjs","title":"Atualizando a imagem <code>educa_utf_nextjs</code>","text":"<p>Para atualizar para a ultima vers\u00e3o disponivel ser\u00e1 necess\u00e1rio apagar a imagem defasada.</p> <p>Para ver as imagens atuais execute <code>docker images</code>. Voc\u00ea deve ver algo parecido com:</p> Bash<pre><code>REPOSITORY                TAG       IMAGE ID       CREATED          SIZE\nzrafaf/educa_utf_nextjs   latest    ffb4489371c3   15 minutes ago   818MB\n</code></pre> <p>Para deletar a imagem defasada FOR\u00c7ADO voc\u00ea pode executar: <code>docker rmi [id] -f</code>.</p> <p>No caso da imagem a cima seria necess\u00e1rio executar <code>docker rmi ffb4489371c3 -f</code></p>"},{"location":"desenvolvimento/documentacao/","title":"Documenta\u00e7\u00e3o","text":""},{"location":"desenvolvimento/documentacao/#documentacao","title":"Documenta\u00e7\u00e3o","text":"<p>Para desenvolvimento da documenta\u00e7\u00e3o foi utilizado a biblioteca de Python MkDocs, junto com o tema Material for MkDocs.</p> <p>Tamb\u00e9m foi utilizado o plugin MkDocs with PDF para a renderiza\u00e7\u00e3o de toda a documenta\u00e7\u00e3o como <code>.pdf</code> automaticamente, esse arquivo pode ser encontrado aqui.</p>"},{"location":"desenvolvimento/documentacao/#configurando-o-ambiente-de-desenvolvimento","title":"Configurando o ambiente de desenvolvimento","text":"<p>Para informa\u00e7\u00f5es sobre como configurar o ambiente de desenvolvimento para a documenta\u00e7\u00e3o visite a p\u00e1gina setup.</p>"},{"location":"desenvolvimento/documentacao/#editando-a-documentacao","title":"Editando a documenta\u00e7\u00e3o","text":"<p>Para informa\u00e7\u00f5es sobre como editar documenta\u00e7\u00e3o do MkDocs visite ZRafaF/ReadTheDocksBase.</p> <p>Para informa\u00e7\u00f5es mais a fundo verifique:</p> <ul> <li> <p>MkDocs</p> </li> <li> <p>Material for MkDocs.</p> </li> </ul>"},{"location":"desenvolvimento/front-end/","title":"Front-end","text":""},{"location":"desenvolvimento/front-end/#front-end","title":"Front-end","text":"<p>Esta p\u00e1gina apresentar\u00e1 todas as informa\u00e7\u00f5es relacionadas ao front-end da aplica\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/front-end/#nextjs","title":"NEXTJS","text":""},{"location":"desenvolvimento/front-end/#referencias","title":"Refer\u00eancias","text":"<ul> <li>Estrutura do projeto</li> <li>Essenciais do React</li> <li>Nextjs com docker oficial</li> </ul>"},{"location":"desenvolvimento/front-end/#editor-de-artigos","title":"Editor de artigos","text":"<p>Para o editor de artigos est\u00e1 sendo utilizado o react-simplemde-editor que se trata de um wrap do easy-markdown-editor.</p> <p>O EasyMDE faz uso do Fonts Awesome V5 para seus diferentes \u00edcones.</p>"},{"location":"desenvolvimento/metricas/","title":"M\u00e9tricas","text":""},{"location":"desenvolvimento/metricas/#metricas","title":"M\u00e9tricas","text":""},{"location":"desenvolvimento/metricas/#umami","title":"Umami","text":"<p>Para as m\u00e9tricas do website est\u00e1 sendo utilizado Umami atrav\u00e9s de uma build customizada.</p>"},{"location":"desenvolvimento/metricas/#customizacao-da-build","title":"Customiza\u00e7\u00e3o da build","text":"<p>Para adequar as variaveis do container foi feito um fork do reposit\u00f3rio original, esse fork pode ser acessado em https://github.com/zRafaF/educa-utf-umami, nele adicionei dois workflows um para checar nomenclatura de releases e outro para realizar a build e publica\u00e7\u00e3o autom\u00e1tica do container, observe a vari\u00e1vel <code>BASE_PATH</code>.</p> <p>O reposit\u00f3rio no DockerHub pode ser acessado em https://hub.docker.com/r/zrafaf/educa_utf_umami</p>"},{"location":"desenvolvimento/metricas/#dashboard","title":"Dashboard","text":"<p>A aplica\u00e7\u00e3o est\u00e1 acess\u00edvel atrav\u00e9s do proxy reverso em https://educautf.td.utfpr.edu.br/umami.</p> <p>Voc\u00ea tamb\u00e9m pode visualizar os dados p\u00fablicos em https://educautf.td.utfpr.edu.br/umami/share/NmknLrXmtHfUfTwY/EducaUTF</p>"},{"location":"desenvolvimento/metricas/#segredos","title":"Segredos","text":"<p>O <code>docker-compose.yaml</code> depende da vari\u00e1vel de ambiente <code>UMAMI_APP_SECRET</code>, essa deve ser setada dentro de um arquivo <code>.env</code> no mesmo diret\u00f3rio do <code>docker-compose.yaml</code>.</p> <p>Exemplo de <code>.env</code></p> Bash<pre><code>UMAMI_APP_SECRET=meusegredoumami\n</code></pre>"},{"location":"desenvolvimento/plugins/","title":"Plugins","text":"<p>Plugins s\u00e3o uma maneira de aprimorar e adicionar interatividade a conte\u00fados publicados.</p> <p>Os Plugins podem ser acessados na Barra de ferramentas do editor.</p> <p></p>"},{"location":"desenvolvimento/plugins/#criando-um-novo-plugin","title":"Criando um novo plugin","text":"<p>Voc\u00ea pode contribuir com o EducaUTF criando novos plugins!</p> <p>Criar um plugin \u00e9 f\u00e1cil, vou te mostrar como fazer.</p> <p>Vamos criar um plugin que converte o input do usu\u00e1rio para letras mai\u00fasculas.</p>"},{"location":"desenvolvimento/plugins/#preparacao","title":"Prepara\u00e7\u00e3o","text":"<p>O primeiro passo \u00e9 criar uma pasta com o nome de seu plugin, todos os plugins devem Ter sua pr\u00f3pria pasta.</p> <p>V\u00e1 at\u00e9 a pasta <code>/app/plugins/</code> e crie a sua pasta, chamarei de <code>UpperMaker</code>.</p> <p></p> <p>Agora vou criar 2 arquivos:</p> <ul> <li> <p><code>UpperMaker.tsx</code>: Esse \u00e9 o componente que ser\u00e1 renderizado para os leitores.</p> </li> <li> <p><code>UpperMakerEditor.tsx</code>: Esse \u00e9 o componente que o autor usar\u00e1 para editar o conte\u00fado.</p> </li> </ul>"},{"location":"desenvolvimento/plugins/#uppermakertsx","title":"UpperMaker.tsx","text":"<p>Vamos come\u00e7ar criando o componente que ser\u00e1 renderizado.</p> <p></p> <p>Esse componente recebe uma string chamada <code>text</code> como <code>prop</code>, checa se ela \u00e9 uma string v\u00e1lida e logo em seguida renderiza o texto em letras mai\u00fasculas.</p> <p>dica</p> <p>Voc\u00ea pode utilizar outras bibliotecas, css e o que mais desejar para criar esse componente. Se divirta!</p>"},{"location":"desenvolvimento/plugins/#uppermakereditortsx","title":"UpperMakerEditor.tsx","text":"<p>Agora vamos para o editor, todos os editores ser\u00e3o renderizados dentro de um modal. Voc\u00ea n\u00e3o precisa se preocupar com isso.</p> Text Only<pre><code>'use client';\n\nimport { FunctionComponent, useState } from 'react';\nimport { PluginEditorProps } from '../PluginsTypes';\nimport UpperMaker from './UpperMaker';\n\nconst UpperMakerEditor: FunctionComponent&lt;PluginEditorProps&gt; = ({\n    returnFunction,\n}) =&gt; {\n    const [userInput, setUserInput] = useState&lt;string&gt;('');\n\n    return (\n        &lt;&gt;\n            &lt;input\n                type=\"text\"\n                placeholder=\"Digite o texto aqui\"\n                onChange={(e) =&gt; {\n                    setUserInput(e.target.value);\n                }}\n            /&gt;\n            &lt;button\n                onClick={() =&gt; {\n                    returnFunction(&lt;UpperMaker text={userInput} /&gt;);\n                }}\n            &gt;\n                Enviar\n            &lt;/button&gt;\n        &lt;/&gt;\n    );\n};\n\nexport default UpperMakerEditor;\n</code></pre> <p>Os editores recebem algumas <code>props</code> por padr\u00e3o, por tanto vamos come\u00e7ar utilizando o tipo <code>PluginEditorProps</code> para nos fornecer intellisense.</p> <p>Todos os plugins devem utilizar a fun\u00e7\u00e3o <code>returnFunction</code> essa fun\u00e7\u00e3o recebe uma o componente que deve ser renderizado.</p>"},{"location":"desenvolvimento/plugins/#adicionando-a-barra-de-ferramentas","title":"Adicionando \u00e0 barra de ferramentas","text":"<p>Para adicionar seu plugin \u00e0 barra de ferramentas voc\u00ea deve atualizar o arquivo <code>/app/plugins/PluginsArray.tsx</code>.</p> <p>Vamos adicionar o novo plugin</p> <p></p> <p>Preencha as informa\u00e7\u00f5es como achar melhor, utilize o intellisense para mais informa\u00e7\u00f5es sobre os par\u00e2metros.</p>"},{"location":"desenvolvimento/plugins/#adicionando-o-plugin-ao-renderizador","title":"Adicionando o plugin ao renderizador","text":"<p>Por fim v\u00e1 ao arquivo <code>/app/plugins/useOverridePlugins.tsx</code> para permitir que o renderizador utilize seu plugin.</p> <p>O primeiro passo \u00e9 import\u00e1-lo dinamicamente:</p> <p></p> <p>E por fim adicion\u00e1-lo aos overrides</p> Text Only<pre><code>'use-client';\n\nimport ImgBlock from '@/plugins/ImgBlock/ImgBlock';\nimport PreBlock from '@/plugins/PreBlock/PreBlock';\nimport { MarkdownToJSX } from 'markdown-to-jsx';\nimport dynamic from 'next/dynamic';\nimport { useMemo } from 'react';\n\nconst Equation = dynamic(() =&gt; import('@/plugins/Equation/Equation'), {\n    ssr: true,\n});\nconst RadialSelector = dynamic(\n    () =&gt; import('@/plugins/RadialSelector/RadialSelector'),\n    {\n        ssr: true,\n    }\n);\n\nconst UpperMaker = dynamic(() =&gt; import('@/plugins/UpperMaker/UpperMaker'), {\n    ssr: true,\n});\n\nconst useOverridePlugins = () =&gt; {\n    const overrides = useMemo&lt;MarkdownToJSX.Overrides&gt;(() =&gt; {\n        return {\n            pre: PreBlock,\n            Equation: Equation,\n            img: ImgBlock,\n            RadialSelector: RadialSelector,\n            UpperMaker: UpperMaker,\n        };\n    }, []);\n\n    return [overrides] as const;\n};\n\nexport default useOverridePlugins;\n</code></pre>"},{"location":"desenvolvimento/posts/","title":"Posts","text":""},{"location":"desenvolvimento/posts/#posts","title":"Posts","text":"<p>Aqui comentarei sobre o sistema de posts que desenvolvi.</p>"},{"location":"desenvolvimento/posts/#renderizando-conteudo","title":"Renderizando conte\u00fado","text":"<p>Para a renderiza\u00e7\u00e3o de arquivos Markdown <code>.md</code> estou utilizando o pacote markdown-to-jsx.</p>"},{"location":"desenvolvimento/posts/#estilizando","title":"Estilizando","text":"<p>Para a estiliza\u00e7\u00e3o modifiquei o pacote github-markdown-css e incorporei os estilos em um arquivo <code>github-markdown.css</code>. </p>"},{"location":"desenvolvimento/reverse-proxy/","title":"Proxy Reverso","text":""},{"location":"desenvolvimento/reverse-proxy/#proxy-reverso","title":"Proxy Reverso","text":"<p>Aqui ser\u00e1 apresentado a arquitetura, setup e configura\u00e7\u00e3o do proxy reverso da aplica\u00e7\u00e3o.</p>"},{"location":"desenvolvimento/reverse-proxy/#nginx-proxy-manager","title":"Nginx Proxy Manager","text":"<p>Para o proxy reverso foi utilizado o Nginx Proxy Manager, o deploy foi feito atrav\u00e9s do container <code>Docker</code> e <code>Docker Compose</code>.</p>"},{"location":"desenvolvimento/reverse-proxy/#configurando-o-proxy","title":"Configurando o proxy","text":"<p>Para acessar o servi\u00e7o \u00e9 necess\u00e1rio que seja acessado via a rede da UTFPR-toledo, ou ent\u00e3o fazendo uso da VPN.</p> <p>O acesso pode ser feito via <code>HTTP</code> no endere\u00e7o <code>educautf.td.utfpr.edu.br:81</code></p>"},{"location":"desenvolvimento/reverse-proxy/#proxy-hosts","title":"Proxy Hosts","text":"<p>O seguinte proxy host foi configurado: </p> <p>Com as seguintes configura\u00e7\u00f5es:</p> <p></p> <p>Para as <code>custom locations</code> a seguinte configura\u00e7\u00e3o est\u00e1 sendo usada:</p> Text Only<pre><code>location /umami {\n    proxy_pass http://ka.td.utfpr.edu.br:3100;\n}\nlocation /olc-api/ {\n    proxy_pass http://ka.td.utfpr.edu.br:3005/;\n}\nlocation /db/_ {\n    proxy_pass http://ka.td.utfpr.edu.br:8090/_;\n}\nlocation /db/api {\n    proxy_pass http://ka.td.utfpr.edu.br:8090/api;\n}\nlocation /umc-api/ {\n    proxy_pass http://ka.td.utfpr.edu.br:4109/;\n}\n</code></pre> <p>Aten\u00e7\u00e3o</p> <p>As configura\u00e7\u00f5es podem estar desatualizadas.</p>"},{"location":"desenvolvimento/reverse-proxy/#certificado-ssl","title":"Certificado SSL","text":"<p>Ao selecionar <code>Add SSL Certificate</code> e <code>Custom</code> voc\u00ea ser\u00e1 apresentado a seguinte tela: </p> <p>Os arquivos relacionados ao certificado s\u00e3o:</p> <ul> <li><code>*.key</code>: Dever\u00e1 ser inserido no campo <code>Certificate key</code>, aten\u00e7\u00e3o essa \u00e9 uma chave PRIVADA;</li> <li><code>*.cer</code>: Dever\u00e1 ser inserido no campo <code>Certificate</code>;</li> <li><code>*.pem</code>: Dever\u00e1 ser inserido no campo <code>Intermediate Certificate</code>;</li> </ul>"},{"location":"desenvolvimento/setup/","title":"Configura\u00e7\u00e3o","text":"<p>Esta p\u00e1gina definir\u00e1 o passo a passo para compilar este projeto.</p>"},{"location":"desenvolvimento/setup/#clonar-o-repositorio","title":"Clonar o reposit\u00f3rio","text":"Bash<pre><code>git clone https://github.com/ZRafaF/educa-utf\n\ncd educa-utf\n</code></pre>"},{"location":"desenvolvimento/setup/#instalar-dependencias","title":"Instalar depend\u00eancias","text":"Bash<pre><code>npm run install\n</code></pre>"},{"location":"desenvolvimento/setup/#criando-variaveis-de-ambiente","title":"Criando vari\u00e1veis de ambiente","text":"<p>Os seguintes arquivos s\u00e3o necess\u00e1rios para o desenvolvimento da aplica\u00e7\u00e3o:</p>"},{"location":"desenvolvimento/setup/#variaveis-do-nextjs","title":"Vari\u00e1veis do NEXTJS","text":"<p>Crie um arquivo de vari\u00e1vel de ambiente recomendo <code>.env.local</code> e adicione as seguintes vari\u00e1veis:</p> Bash<pre><code># URL of your PocketBase db\nPB_URL=https://myproject.pockethost.io\n\n# Should Next analyze your packages during build\nANALYZE=false\n</code></pre> <p>Aten\u00e7\u00e3o</p> <p>Esses s\u00e3o SEGREDOS e n\u00e3o dever\u00e3o ser enviados a reposit\u00f3rios p\u00fablicos. Seja GitHub, DockerHub e outros.</p>"},{"location":"desenvolvimento/setup/#variaveis-do-typegen","title":"Vari\u00e1veis do TypeGen","text":"<p>Em um arquivo de vari\u00e1vel de ambiente chamado <code>.env</code> adicione as seguintes vari\u00e1veis:</p> Bash<pre><code># URL of your PocketBase db\nPB_TYPEGEN_URL=https://myproject.pockethost.io\n\n# Email of an admin on PocketBase dashboard\nPB_TYPEGEN_EMAIL=admin@myproject.com\n\n# Password of an admin on PocketBase dashboard\nPB_TYPEGEN_PASSWORD=secr3tp@ssword!\n</code></pre> <p>Aten\u00e7\u00e3o</p> <p>Esses s\u00e3o SEGREDOS e n\u00e3o dever\u00e3o ser enviados a reposit\u00f3rios p\u00fablicos. Seja GitHub, DockerHub e outros.</p>"},{"location":"desenvolvimento/setup/#documentacao","title":"Documenta\u00e7\u00e3o","text":"<p>Este projeto foi desenvolvido usando a vers\u00e3o Python <code>Python 3.10.x</code>. A etapa a seguir \u00e9 necess\u00e1ria apenas para aqueles que desejam editar a documenta\u00e7\u00e3o.</p> <p>Para compilar a documenta\u00e7\u00e3o voc\u00ea precisar\u00e1 de Python, PIP e GIT.</p>"},{"location":"desenvolvimento/setup/#criando-um-ambiente-virtual","title":"Criando um ambiente virtual","text":"<p>A etapa a seguir n\u00e3o \u00e9 obrigat\u00f3ria, mas \u00e9 recomendada. Se voc\u00ea quiser saber um pouco mais sobre ambientes virtuais de python visite https://docs.python.org/3/library/venv.html</p> Bash<pre><code>python -m pip install --user virtualenv\n\npython -m venv venv\n</code></pre> <p>Um diret\u00f3rio <code>venv</code> deve ser criado na pasta raiz do projeto.</p> <p>Como ativar:</p> <p>Ativa\u00e7\u00e3o no Windows</p> <pre><code>venv/Scripts/activate\n</code></pre> <p>or</p> <p>Ativa\u00e7\u00e3o no Linux</p> <pre><code>source venv/bin/activate\n</code></pre> <p>Com isso o ambiente virtual estar\u00e1 ativado e qualquer biblioteca instalada ser\u00e1 aplicada apenas \u00e0 esse ambiente.</p>"},{"location":"desenvolvimento/setup/#instalando-dependencias","title":"Instalando depend\u00eancias","text":"Bash<pre><code>pip install -r docs/requirements.txt\n</code></pre> <p>Esse comando ir\u00e1 instalar todas as depend\u00eancias contidas no arquivo <code>requirements.txt</code></p>"},{"location":"desenvolvimento/setup/#build","title":"Build","text":"<p>Para compilar a documenta\u00e7\u00e3o temos duas op\u00e7\u00f5es:</p> <ul> <li> <p>Serve:</p> <p>Esta op\u00e7\u00e3o \u00e9 usada para depura\u00e7\u00e3o, ela abrir\u00e1 a p\u00e1gina est\u00e1tica em uma das portas localhost.</p> Bash<pre><code>mkdocs serve\n</code></pre> </li> <li> <p>Build:     Esta op\u00e7\u00e3o cria uma compila\u00e7\u00e3o da documenta\u00e7\u00e3o e a salva no diret\u00f3rio <code>/site/</code>.     Bash<pre><code>mkdocs build\n</code></pre></p> </li> </ul> <p>Note</p> <p>Esteja ciente da Environment Variable <code>ENABLE_PDF_EXPORT</code>, ela s\u00f3 ir\u00e1 gerar o PDF se essa vari\u00e1vel estiver definida como <code>1</code>.</p> <p>Voc\u00ea pode alterar o arquivo <code>mkdocs.yml</code> e remover esta linha se preferir.</p>"},{"location":"desenvolvimento/setup/#integracao-pocketbase","title":"Integra\u00e7\u00e3o Pocketbase","text":"<p>Para gerar os Bindings do pocket base est\u00e1 sendo usado a biblioteca pocketbase-typegen. Para gerar os tipos execute:</p> <p><code>yarn typegen</code></p> <p>O output est\u00e1 localizado em <code>/src/types/pocketbase-types.ts</code>.</p>"}]}